<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SKSU Lost &amp; Found Platform</title>
  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      },
    }
  </script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', system-ui, sans-serif;
        }

        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #1e3a8a;
            color: white;
            padding: 8px 16px;
            z-index: 100;
            transition: top 0.3s;
        }
        .skip-link:focus {
            top: 0;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Page section fade in */
        .section-fade-in {
            animation: sectionFadeIn 0.4s ease-out;
        }
        
        @keyframes sectionFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .status-badge {
            transition: all 0.2s ease;
        }
        
        .item-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .item-card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 12px 40px rgba(0,0,0,0.12);
        }

        .item-card:active {
            transform: translateY(-2px) scale(0.99);
        }

        /* Button micro-interactions */
        .btn-primary {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .btn-primary:active {
            transform: translateY(0) scale(0.98);
        }

        /* Focus visible for accessibility */
        .focus-ring:focus-visible {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Skeleton loader with gradient shimmer */
        .skeleton {
            background: linear-gradient(90deg, #e5e7eb 25%, #f3f4f6 50%, #e5e7eb 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 0.5rem;
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-text {
            height: 1rem;
            margin-bottom: 0.5rem;
        }

        .skeleton-text-sm {
            height: 0.75rem;
            margin-bottom: 0.25rem;
        }

        .skeleton-image {
            height: 8rem;
            margin-bottom: 0.75rem;
        }

        /* Mobile drawer styles */
        .mobile-drawer-backdrop {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .mobile-drawer-backdrop.active {
            opacity: 1;
            visibility: visible;
        }

        .mobile-drawer {
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .mobile-drawer.active {
            transform: translateX(0);
        }

        /* Modal animations */
        .modal-backdrop {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .modal-backdrop.active {
            opacity: 1;
        }

        .modal-content {
            transform: scale(0.95) translateY(10px);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .modal-backdrop.active .modal-content {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        /* Quick action cards */
        .action-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .action-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full bg-gray-50">
  <!-- Skip Link for Accessibility -->
  <a href="#main-content" class="skip-link focus-ring">Skip to main content</a>
  <div id="app" class="min-h-full"><!-- Header -->
   <header class="bg-blue-900 text-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
     <div class="flex justify-between items-center py-4">
      <div class="flex items-center space-x-4">
       <!-- Custom SVG University Logo -->
       <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center shadow-md">
        <svg class="w-7 h-7 text-blue-900" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
         <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
        </svg>
       </div>
       <div>
        <h1 id="platform-title" class="text-xl font-bold">SKSU Lost &amp; Found Platform</h1>
        <p id="university-name" class="text-blue-200 text-sm">Sultan Kudarat State University</p>
       </div>
      </div>
      <nav class="hidden md:flex space-x-6">
       <button onclick="showSection('home')" class="nav-btn flex items-center space-x-2 text-blue-200 hover:text-white transition-colors focus-ring rounded-md px-2 py-1">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
        <span>Home</span>
       </button>
       <button onclick="showSection('report-found')" class="nav-btn flex items-center space-x-2 text-blue-200 hover:text-white transition-colors focus-ring rounded-md px-2 py-1">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        <span>Report Found</span>
       </button>
       <button onclick="showSection('report-lost')" class="nav-btn flex items-center space-x-2 text-blue-200 hover:text-white transition-colors focus-ring rounded-md px-2 py-1">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        <span>Report Lost</span>
       </button>
       <a href="admin.html" class="nav-btn flex items-center space-x-2 text-blue-200 hover:text-white transition-colors focus-ring rounded-md px-2 py-1">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
        <span>Admin</span>
       </a>
      </nav>
      <button id="mobile-menu-btn" class="md:hidden text-white p-2 rounded-md hover:bg-blue-800 transition-colors focus-ring" onclick="toggleMobileMenu()" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-drawer">
       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
     </div>
    </div>
   </header>

   <!-- Mobile Drawer Backdrop -->
   <div id="mobile-drawer-backdrop" class="mobile-drawer-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden" onclick="closeMobileMenu()" aria-hidden="true"></div>

   <!-- Mobile Drawer (slides from right) -->
   <div id="mobile-drawer" class="mobile-drawer fixed top-0 right-0 h-full w-72 bg-blue-900 z-50 md:hidden shadow-2xl" role="dialog" aria-modal="true" aria-label="Mobile navigation">
    <div class="flex flex-col h-full">
     <div class="flex justify-between items-center p-4 border-b border-blue-800">
      <span class="text-white font-semibold">Menu</span>
      <button onclick="closeMobileMenu()" class="text-white p-2 rounded-md hover:bg-blue-800 transition-colors focus-ring" aria-label="Close menu">
       <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
      </button>
     </div>
     <nav class="flex-1 p-4">
      <div class="flex flex-col space-y-2">
       <button onclick="showSection('home'); closeMobileMenu()" class="flex items-center space-x-3 text-left text-blue-200 hover:text-white hover:bg-blue-800 py-3 px-4 rounded-lg transition-colors focus-ring">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
        <span>Home</span>
       </button>
       <button onclick="showSection('report-found'); closeMobileMenu()" class="flex items-center space-x-3 text-left text-blue-200 hover:text-white hover:bg-blue-800 py-3 px-4 rounded-lg transition-colors focus-ring">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        <span>Report Found</span>
       </button>
       <button onclick="showSection('report-lost'); closeMobileMenu()" class="flex items-center space-x-3 text-left text-blue-200 hover:text-white hover:bg-blue-800 py-3 px-4 rounded-lg transition-colors focus-ring">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        <span>Report Lost</span>
       </button>
       <a href="admin.html" class="flex items-center space-x-3 text-left text-blue-200 hover:text-white hover:bg-blue-800 py-3 px-4 rounded-lg transition-colors focus-ring">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
        <span>Admin</span>
       </a>
      </div>
     </nav>
     <div class="p-4 border-t border-blue-800">
      <p class="text-blue-300 text-xs text-center">Sultan Kudarat State University</p>
     </div>
    </div>
   </div><!-- Main Content -->
   <main id="main-content" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!-- Home Section -->
    <section id="home-section" class="section-content section-fade-in">
     <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-4">Find Your Lost Items</h2>
      <p class="text-gray-600 max-w-2xl mx-auto">Search through found items or report what you've lost or found. Our platform helps connect items with their rightful owners.</p>
     </div><!-- Search Bar -->
     <div class="max-w-3xl mx-auto mb-8">
      <div class="bg-white rounded-xl shadow-md p-4 border border-gray-100">
       <div class="relative mb-4">
        <input type="text" id="search-input" placeholder="Search for items (e.g., phone, keys, wallet...)" class="w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent focus-ring" aria-label="Search for items">
        <svg class="absolute left-4 top-3.5 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
       </div>
       <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
        <select id="home-category-filter" class="px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
         <option value="">All Categories</option>
         <option value="Electronics">Electronics</option>
         <option value="Bags">Bags & Backpacks</option>
         <option value="Keys">Keys</option>
         <option value="Clothing">Clothing</option>
         <option value="Jewelry">Jewelry</option>
         <option value="Documents">Documents/IDs</option>
         <option value="Books">Books</option>
         <option value="Other">Other</option>
        </select>
        <select id="home-location-filter" class="px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
         <option value="">All Locations</option>
         <option value="Main Building">Main Building</option>
         <option value="Library">Library</option>
         <option value="Cafeteria">Cafeteria</option>
         <option value="Gymnasium">Gymnasium</option>
         <option value="Engineering Building">Engineering Building</option>
         <option value="Science Building">Science Building</option>
         <option value="Parking Area">Parking Area</option>
         <option value="Dormitory">Dormitory</option>
        </select>
        <select id="home-status-filter" class="px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500">
         <option value="">All Status</option>
         <option value="unclaimed">Unclaimed</option>
         <option value="claimed">Claimed</option>
         <option value="returned">Returned</option>
        </select>
        <button onclick="clearFilters()" class="px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50 transition-colors">Clear Filters</button>
       </div>
      </div>
     </div><!-- Quick Actions -->
     <div class="grid md:grid-cols-2 gap-6 mb-12">
      <div class="action-card bg-white rounded-xl shadow-md p-6 text-center border border-gray-100">
       <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
       </div>
       <h3 class="text-xl font-semibold mb-2">Found Something?</h3>
       <p class="text-gray-600 mb-4">Help someone get their item back by reporting what you found.</p>
       <button onclick="showSection('report-found')" class="btn-primary bg-green-600 text-white px-6 py-2.5 rounded-lg hover:bg-green-700 transition-colors focus-ring font-medium">Report Found Item</button>
      </div>
      <div class="action-card bg-white rounded-xl shadow-md p-6 text-center border border-gray-100">
       <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
       </div>
       <h3 class="text-xl font-semibold mb-2">Lost Something?</h3>
       <p class="text-gray-600 mb-4">Report your lost item and we'll help you find it.</p>
       <button onclick="showSection('report-lost')" class="btn-primary bg-blue-600 text-white px-6 py-2.5 rounded-lg hover:bg-blue-700 transition-colors focus-ring font-medium">Report Lost Item</button>
      </div>
     </div><!-- Recent Items -->
     <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
      <div class="flex items-center justify-between mb-4">
       <h3 class="text-xl font-semibold">Recent Found Items</h3>
       <div id="items-loading-indicator" class="hidden">
        <div class="loading-spinner"></div>
       </div>
      </div>
      <div id="recent-items" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4" role="list" aria-label="Recent found items"><!-- Items will be populated here -->
      </div>
     </div>
    </section><!-- Report Found Section -->
    <section id="report-found-section" class="section-content hidden">
     <div class="max-w-2xl mx-auto">
      <h2 class="text-3xl font-bold text-gray-900 mb-6">Report Found Item</h2>
      <div class="bg-white rounded-lg shadow-md p-6">
       <form id="found-item-form">
        <div class="space-y-6">
         <div><label for="found-title" class="block text-sm font-medium text-gray-700 mb-2">Item Title</label> <input type="text" id="found-title" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., iPhone 12, Blue Backpack, Car Keys">
         </div>
         <div><label for="found-category" class="block text-sm font-medium text-gray-700 mb-2">Category</label> <select id="found-category" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select category</option> <option value="Electronics">Electronics</option> <option value="Bags">Bags &amp; Backpacks</option> <option value="Keys">Keys</option> <option value="Clothing">Clothing</option> <option value="Jewelry">Jewelry</option> <option value="Documents">Documents/IDs</option> <option value="Books">Books</option> <option value="Other">Other</option> </select>
         </div>
         <div><label for="found-description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="found-description" rows="4" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Describe the item in detail (color, brand, condition, etc.)"></textarea>
         </div>
         <div><label for="found-location" class="block text-sm font-medium text-gray-700 mb-2">Location Found</label> <select id="found-location" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select location</option> <option value="Main Building">Main Building</option> <option value="Library">Library</option> <option value="Cafeteria">Cafeteria</option> <option value="Gymnasium">Gymnasium</option> <option value="Engineering Building">Engineering Building</option> <option value="Science Building">Science Building</option> <option value="Parking Area">Parking Area</option> <option value="Dormitory">Dormitory</option> <option value="Other">Other</option> </select>
         </div>
         <div><label for="found-image" class="block text-sm font-medium text-gray-700 mb-2">Item Image <span class="text-red-500">*</span></label> <input type="file" id="found-image" accept="image/*" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <p class="text-xs text-gray-500 mt-1">Please upload a clear photo of the found item (Required)</p>
          <div id="found-image-preview" class="mt-2 hidden"><img id="found-preview-img" src="" alt="Preview" class="max-w-full h-48 object-contain rounded-md border border-gray-300"></div>
         </div>
         <div><label for="found-reporter-name" class="block text-sm font-medium text-gray-700 mb-2">Your Name</label> <input type="text" id="found-reporter-name" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your full name">
         </div>
         <div><label for="found-contact" class="block text-sm font-medium text-gray-700 mb-2">Contact Information</label> <input type="text" id="found-contact" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Email or phone number">
         </div><button type="submit" id="submit-found-btn" class="w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors flex items-center justify-center"> <span id="submit-found-text">Submit Found Item</span>
          <div id="submit-found-spinner" class="loading-spinner ml-2 hidden"></div></button>
        </div>
       </form>
      </div>
     </div>
    </section><!-- Report Lost Section -->
    <section id="report-lost-section" class="section-content hidden">
     <div class="max-w-2xl mx-auto">
      <h2 class="text-3xl font-bold text-gray-900 mb-6">Report Lost Item</h2>
      <div class="bg-white rounded-lg shadow-md p-6">
       <form id="lost-item-form">
        <div class="space-y-6">
         <div><label for="lost-title" class="block text-sm font-medium text-gray-700 mb-2">Item Title</label> <input type="text" id="lost-title" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., iPhone 12, Blue Backpack, Car Keys">
         </div>
         <div><label for="lost-category" class="block text-sm font-medium text-gray-700 mb-2">Category</label> <select id="lost-category" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select category</option> <option value="Electronics">Electronics</option> <option value="Bags">Bags &amp; Backpacks</option> <option value="Keys">Keys</option> <option value="Clothing">Clothing</option> <option value="Jewelry">Jewelry</option> <option value="Documents">Documents/IDs</option> <option value="Books">Books</option> <option value="Other">Other</option> </select>
         </div>
         <div><label for="lost-description" class="block text-sm font-medium text-gray-700 mb-2">Description</label> <textarea id="lost-description" rows="4" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Describe your lost item in detail (color, brand, condition, etc.)"></textarea>
         </div>
         <div><label for="lost-location" class="block text-sm font-medium text-gray-700 mb-2">Last Known Location</label> <select id="lost-location" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select location</option> <option value="Main Building">Main Building</option> <option value="Library">Library</option> <option value="Cafeteria">Cafeteria</option> <option value="Gymnasium">Gymnasium</option> <option value="Engineering Building">Engineering Building</option> <option value="Science Building">Science Building</option> <option value="Parking Area">Parking Area</option> <option value="Dormitory">Dormitory</option> <option value="Other">Other</option> </select>
         </div>
         <div><label for="lost-reporter-name" class="block text-sm font-medium text-gray-700 mb-2">Your Name</label> <input type="text" id="lost-reporter-name" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your full name">
         </div>
         <div><label for="lost-contact" class="block text-sm font-medium text-gray-700 mb-2">Contact Information</label> <input type="text" id="lost-contact" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Email or phone number">
         </div><button type="submit" id="submit-lost-btn" class="w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors flex items-center justify-center"> <span id="submit-lost-text">Submit Lost Item Report</span>
          <div id="submit-lost-spinner" class="loading-spinner ml-2 hidden"></div></button>
        </div>
       </form>
      </div>
     </div>
    </section>
   </div><!-- Success Message -->
   <div id="success-message" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-xl shadow-lg hidden fade-in z-50">
    <div class="flex items-center">
     <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
     <span id="success-text">Success!</span>
    </div>
   </div><!-- Error Message -->
   <div id="error-message" class="fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-xl shadow-lg hidden fade-in z-50">
    <div class="flex items-center">
     <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
     <span id="error-text">Error occurred!</span>
    </div>
   </div><!-- Item Detail Modal -->
   <div id="item-modal" class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50" onclick="closeModalOnBackdrop(event)" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
     <div class="p-6">
      <div class="flex justify-between items-start mb-4">
       <h2 id="modal-title" class="text-2xl font-bold text-gray-900"></h2>
       <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 p-1 rounded-md hover:bg-gray-100 transition-colors focus-ring" aria-label="Close modal">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
       </button>
      </div>
      <div id="modal-content" class="space-y-4">
       <!-- Content will be populated dynamically -->
      </div>
      <div class="mt-6 flex justify-end space-x-3">
       <button onclick="closeModal()" class="btn-primary px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors focus-ring">Close</button>
       <button id="modal-action-btn" class="btn-primary px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors focus-ring hidden">Contact Reporter</button>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
        // Global variables
        let currentData = [];
        let filteredData = [];
        let currentSection = 'home';
        const STORAGE_KEY = 'lostFoundItems';

        // Default configuration
        const defaultConfig = {
            platform_title: "SKSU Lost & Found Platform",
            university_name: "Sultan Kudarat State University",
            admin_contact: "security@sksu.edu.ph",
            office_location: "Security Office, Main Building"
        };

        // LocalStorage fallback functions
        function loadFromLocalStorage() {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                return stored ? JSON.parse(stored) : [];
            } catch (error) {
                console.error("Error loading from localStorage:", error);
                return [];
            }
        }

        function saveToLocalStorage(data) {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
                return true;
            } catch (error) {
                console.error("Error saving to localStorage:", error);
                return false;
            }
        }

        function createItem(itemData) {
            currentData.push(itemData);
            saveToLocalStorage(currentData);
            filteredData = currentData;
            updateUI();
            return { isOk: true };
        }

        function updateItem(updatedItem) {
            const index = currentData.findIndex(item => item.id === updatedItem.id);
            if (index !== -1) {
                currentData[index] = updatedItem;
                saveToLocalStorage(currentData);
                filteredData = currentData;
                updateUI();
                return { isOk: true };
            }
            return { isOk: false };
        }

        function deleteItemById(itemToDelete) {
            currentData = currentData.filter(item => item.id !== itemToDelete.id);
            saveToLocalStorage(currentData);
            filteredData = currentData;
            updateUI();
            return { isOk: true };
        }

        // Initialize app
        function initializeApp() {
            try {
                // Show skeleton loaders first
                showSkeletonLoaders();
                
                // Simulate slight delay for better UX (shows loading state)
                setTimeout(() => {
                    // Use localStorage for data persistence
                    console.log("Using localStorage for data persistence");
                    currentData = loadFromLocalStorage();
                    filteredData = currentData;
                    updateUI();
                }, 300);
            } catch (error) {
                console.error("Error initializing app:", error);
                // Fallback to empty array on error
                currentData = [];
                filteredData = [];
                updateUI();
            }
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            currentSection = sectionName;
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-white');
                btn.classList.add('text-blue-200');
            });

            // Add section fade-in animation
            const activeSection = document.getElementById(sectionName + '-section');
            activeSection.classList.add('section-fade-in');
        }

        // Mobile drawer functions
        function toggleMobileMenu() {
            const drawer = document.getElementById('mobile-drawer');
            const backdrop = document.getElementById('mobile-drawer-backdrop');
            const menuBtn = document.getElementById('mobile-menu-btn');
            
            drawer.classList.add('active');
            backdrop.classList.add('active');
            menuBtn.setAttribute('aria-expanded', 'true');
            
            // Focus first menu item
            setTimeout(() => {
                drawer.querySelector('button').focus();
            }, 100);
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            const drawer = document.getElementById('mobile-drawer');
            const backdrop = document.getElementById('mobile-drawer-backdrop');
            const menuBtn = document.getElementById('mobile-menu-btn');
            
            drawer.classList.remove('active');
            backdrop.classList.remove('active');
            menuBtn.setAttribute('aria-expanded', 'false');
            
            // Restore body scroll
            document.body.style.overflow = '';
            
            // Return focus to menu button
            menuBtn.focus();
        }

        // Skeleton loader functions
        function showSkeletonLoaders() {
            const container = document.getElementById('recent-items');
            const skeletonCards = Array(6).fill('').map(() => `
                <div class="bg-gray-50 rounded-xl p-4 border border-gray-200" role="listitem" aria-hidden="true">
                    <div class="skeleton skeleton-image rounded-lg"></div>
                    <div class="flex items-start justify-between mb-2">
                        <div class="skeleton skeleton-text w-3/4"></div>
                        <div class="skeleton w-16 h-6 rounded-full"></div>
                    </div>
                    <div class="skeleton skeleton-text-sm w-full"></div>
                    <div class="skeleton skeleton-text-sm w-2/3"></div>
                    <div class="flex justify-between items-center mt-3">
                        <div class="skeleton w-20 h-4"></div>
                        <div class="skeleton w-16 h-4"></div>
                    </div>
                </div>
            `).join('');
            container.innerHTML = skeletonCards;
        }

        // Image preview handler
        function initializeImagePreview() {
            const imageInput = document.getElementById('found-image');
            const previewDiv = document.getElementById('found-image-preview');
            const previewImg = document.getElementById('found-preview-img');
            
            imageInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        previewImg.src = event.target.result;
                        previewDiv.classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                } else {
                    previewDiv.classList.add('hidden');
                }
            });
        }

        // Form submission functions - Initialize after DOM loads
        function initializeFormListeners() {
            // Found Item Form
            document.getElementById('found-item-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (currentData.length >= 999) {
                showMessage("Maximum limit of 999 items reached. Please contact admin.", 'error');
                return;
            }

            const submitBtn = document.getElementById('submit-found-btn');
            const submitText = document.getElementById('submit-found-text');
            const submitSpinner = document.getElementById('submit-found-spinner');
            
            // Show loading state
            submitBtn.disabled = true;
            submitText.textContent = 'Submitting...';
            submitSpinner.classList.remove('hidden');
            
            try {
                // Get image file
                const imageFile = document.getElementById('found-image').files[0];
                if (!imageFile) {
                    showMessage('Please upload an image of the item', 'error');
                    submitBtn.disabled = false;
                    submitText.textContent = 'Submit Found Item';
                    submitSpinner.classList.add('hidden');
                    return;
                }
                
                // Convert image to base64
                const reader = new FileReader();
                reader.onload = async function(event) {
                    const itemData = {
                        id: generateId(),
                        type: 'found',
                        title: document.getElementById('found-title').value,
                        description: document.getElementById('found-description').value,
                        location: document.getElementById('found-location').value,
                        category: document.getElementById('found-category').value,
                        reporter_name: document.getElementById('found-reporter-name').value,
                        contact_info: document.getElementById('found-contact').value,
                        image: event.target.result,
                        status: 'unclaimed',
                        date_reported: new Date().toLocaleDateString(),
                        created_at: new Date().toISOString()
                    };

                    let result;
                    if (window.dataSdk) {
                        result = await window.dataSdk.create(itemData);
                    } else {
                        // Use localStorage fallback
                        result = createItem(itemData);
                    }
                    
                    if (result.isOk) {
                        showMessage('Found item reported successfully!', 'success');
                        document.getElementById('found-item-form').reset();
                        document.getElementById('found-image-preview').classList.add('hidden');
                        showSection('home');
                    } else {
                        showMessage('Failed to submit item. Please try again.', 'error');
                    }
                    
                    // Reset loading state
                    submitBtn.disabled = false;
                    submitText.textContent = 'Submit Found Item';
                    submitSpinner.classList.add('hidden');
                };
                
                reader.onerror = function() {
                    showMessage('Failed to read image file. Please try again.', 'error');
                    submitBtn.disabled = false;
                    submitText.textContent = 'Submit Found Item';
                    submitSpinner.classList.add('hidden');
                };
                
                reader.readAsDataURL(imageFile);
            } catch (error) {
                showMessage('An error occurred. Please try again.', 'error');
                submitBtn.disabled = false;
                submitText.textContent = 'Submit Found Item';
                submitSpinner.classList.add('hidden');
            }
            });

            // Lost Item Form
            document.getElementById('lost-item-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (currentData.length >= 999) {
                showMessage("Maximum limit of 999 items reached. Please contact admin.", 'error');
                return;
            }

            const submitBtn = document.getElementById('submit-lost-btn');
            const submitText = document.getElementById('submit-lost-text');
            const submitSpinner = document.getElementById('submit-lost-spinner');
            
            // Show loading state
            submitBtn.disabled = true;
            submitText.textContent = 'Submitting...';
            submitSpinner.classList.remove('hidden');
            
            try {
                const itemData = {
                    id: generateId(),
                    type: 'lost',
                    title: document.getElementById('lost-title').value,
                    description: document.getElementById('lost-description').value,
                    location: document.getElementById('lost-location').value,
                    category: document.getElementById('lost-category').value,
                    reporter_name: document.getElementById('lost-reporter-name').value,
                    contact_info: document.getElementById('lost-contact').value,
                    status: 'unclaimed',
                    date_reported: new Date().toLocaleDateString(),
                    created_at: new Date().toISOString()
                };

                let result;
                if (window.dataSdk) {
                    result = await window.dataSdk.create(itemData);
                } else {
                    // Use localStorage fallback
                    result = createItem(itemData);
                }
                
                if (result.isOk) {
                    showMessage('Lost item report submitted successfully!', 'success');
                    document.getElementById('lost-item-form').reset();
                    showSection('home');
                } else {
                    showMessage('Failed to submit report. Please try again.', 'error');
                }
            } catch (error) {
                showMessage('An error occurred. Please try again.', 'error');
            } finally {
                // Reset loading state
                submitBtn.disabled = false;
                submitText.textContent = 'Submit Lost Item Report';
                submitSpinner.classList.add('hidden');
            }
            });

            // Search functionality
            document.getElementById('search-input').addEventListener('input', applyHomeFilters);
            document.getElementById('home-category-filter').addEventListener('change', applyHomeFilters);
            document.getElementById('home-location-filter').addEventListener('change', applyHomeFilters);
            document.getElementById('home-status-filter').addEventListener('change', applyHomeFilters);
        }

        function applyHomeFilters() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const categoryFilter = document.getElementById('home-category-filter').value;
            const locationFilter = document.getElementById('home-location-filter').value;
            const statusFilter = document.getElementById('home-status-filter').value;
            
            filteredData = currentData.filter(item => {
                const matchesSearch = !searchTerm || 
                    item.title.toLowerCase().includes(searchTerm) ||
                    item.description.toLowerCase().includes(searchTerm) ||
                    item.category.toLowerCase().includes(searchTerm) ||
                    item.location.toLowerCase().includes(searchTerm);
                
                const matchesCategory = !categoryFilter || item.category === categoryFilter;
                const matchesLocation = !locationFilter || item.location === locationFilter;
                const matchesStatus = !statusFilter || item.status === statusFilter;
                
                return matchesSearch && matchesCategory && matchesLocation && matchesStatus;
            });
            
            updateRecentItems();
        }

        function clearFilters() {
            document.getElementById('search-input').value = '';
            document.getElementById('home-category-filter').value = '';
            document.getElementById('home-location-filter').value = '';
            document.getElementById('home-status-filter').value = '';
            applyHomeFilters();
        }

        // UI update functions
        function updateUI() {
            updateRecentItems();
        }

        function updateRecentItems() {
            const container = document.getElementById('recent-items');
            const recentItems = filteredData
                .filter(item => item.type === 'found')
                .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
                .slice(0, 6);
            
            if (recentItems.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/></svg>
                        </div>
                        <p class="text-gray-500 font-medium">No items found</p>
                        <p class="text-gray-400 text-sm mt-1">Try adjusting your filters or check back later</p>
                    </div>`;
                return;
            }
            
            container.innerHTML = recentItems.map(item => `
                <div class="item-card bg-gray-50 rounded-xl p-4 border border-gray-200 cursor-pointer" onclick='openItemModal(${JSON.stringify(item).replace(/'/g, "&#39;")})' role="listitem" tabindex="0" onkeydown="if(event.key==='Enter')this.click()">
                    ${item.image ? `<img src="${item.image}" alt="${escapeHtml(item.title)}" class="w-full h-32 object-cover rounded-lg mb-3">` : ''}
                    <div class="flex items-start justify-between mb-2">
                        <h4 class="font-semibold text-gray-900">${escapeHtml(item.title)}</h4>
                        <span class="status-badge px-2 py-1 text-xs rounded-full ${getStatusColor(item.status)} font-medium">${item.status}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-3">${escapeHtml(item.description.substring(0, 100))}${item.description.length > 100 ? '...' : ''}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 mb-2">
                        <span class="flex items-center">
                            <svg class="w-3.5 h-3.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                            ${escapeHtml(item.location)}
                        </span>
                        <span class="flex items-center">
                            <svg class="w-3.5 h-3.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                            ${item.date_reported}
                        </span>
                    </div>
                    <div class="flex justify-between items-center text-xs">
                        <span class="flex items-center text-gray-500">
                            <svg class="w-3.5 h-3.5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg>
                            ${escapeHtml(item.category)}
                        </span>
                        <span class="flex items-center text-blue-600 hover:text-blue-800 font-medium">
                            View Details
                            <svg class="w-3.5 h-3.5 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                        </span>
                    </div>
                </div>
            `).join('');
        }

        // Utility functions
        function generateId() {
            return 'item_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function getStatusColor(status) {
            switch (status) {
                case 'unclaimed': return 'bg-yellow-100 text-yellow-800';
                case 'claimed': return 'bg-blue-100 text-blue-800';
                case 'returned': return 'bg-green-100 text-green-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function getTypeColor(type) {
            switch (type) {
                case 'found': return 'bg-green-100 text-green-800';
                case 'lost': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function showMessage(message, type) {
            const messageEl = document.getElementById(type + '-message');
            const textEl = document.getElementById(type + '-text');
            
            textEl.textContent = message;
            messageEl.classList.remove('hidden');
            
            setTimeout(() => {
                messageEl.classList.add('hidden');
            }, 5000);
        }

        // Modal functions
        function openItemModal(item) {
            const modal = document.getElementById('item-modal');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');
            
            title.textContent = item.title;
            
            const statusColor = getStatusColor(item.status);
            const typeColor = getTypeColor(item.type);
            
            content.innerHTML = `
                <div class="space-y-4">
                    <div class="flex items-center space-x-2">
                        <span class="px-3 py-1 text-sm rounded-full ${typeColor} font-medium">${item.type.toUpperCase()}</span>
                        <span class="px-3 py-1 text-sm rounded-full ${statusColor} font-medium">${item.status.toUpperCase()}</span>
                    </div>
                    
                    ${item.image ? `
                        <div class="bg-gray-50 rounded-xl p-4">
                            <h3 class="flex items-center font-semibold text-gray-900 mb-2">
                                <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                                Item Photo
                            </h3>
                            <img src="${item.image}" alt="${escapeHtml(item.title)}" class="w-full max-h-96 object-contain rounded-lg border border-gray-200">
                        </div>
                    ` : ''}
                    
                    <div class="bg-gray-50 rounded-xl p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">Description</h3>
                        <p class="text-gray-700">${escapeHtml(item.description)}</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-gray-50 rounded-xl p-4">
                            <h3 class="flex items-center font-semibold text-gray-900 mb-2">
                                <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg>
                                Category
                            </h3>
                            <p class="text-gray-700">${escapeHtml(item.category)}</p>
                        </div>
                        
                        <div class="bg-gray-50 rounded-xl p-4">
                            <h3 class="flex items-center font-semibold text-gray-900 mb-2">
                                <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                                Location
                            </h3>
                            <p class="text-gray-700">${escapeHtml(item.location)}</p>
                        </div>
                        
                        <div class="bg-gray-50 rounded-xl p-4">
                            <h3 class="flex items-center font-semibold text-gray-900 mb-2">
                                <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/></svg>
                                Date Reported
                            </h3>
                            <p class="text-gray-700">${item.date_reported}</p>
                        </div>
                        
                        <div class="bg-gray-50 rounded-xl p-4">
                            <h3 class="flex items-center font-semibold text-gray-900 mb-2">
                                <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
                                Reporter
                            </h3>
                            <p class="text-gray-700">${escapeHtml(item.reporter_name)}</p>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                        <h3 class="flex items-center font-semibold text-gray-900 mb-2">
                            <svg class="w-5 h-5 mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
                            Contact Information
                        </h3>
                        <p class="text-gray-700">${escapeHtml(item.contact_info)}</p>
                        <p class="text-xs text-gray-500 mt-2">Please contact the reporter if this is your item or if you have information about it.</p>
                    </div>
                    
                    ${findPotentialMatches(item).length > 0 ? `
                        <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-4">
                            <h3 class="flex items-center font-semibold text-gray-900 mb-3">
                                <svg class="w-5 h-5 mr-2 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
                                Potential Matches
                            </h3>
                            <p class="text-sm text-gray-600 mb-3">These items might be related:</p>
                            <div class="space-y-2">
                                ${findPotentialMatches(item).map(match => `
                                    <div class="bg-white p-3 rounded-lg border border-yellow-300 cursor-pointer hover:bg-yellow-50 transition-colors" onclick='openItemModal(${JSON.stringify(match).replace(/'/g, "&#39;")})'>
                                        <div class="flex justify-between items-start">
                                            <div>
                                                <p class="font-medium text-gray-900">${escapeHtml(match.title)}</p>
                                                <p class="text-xs text-gray-600">${escapeHtml(match.description.substring(0, 80))}...</p>
                                                <p class="text-xs text-gray-500 mt-1 flex items-center">
                                                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/></svg>
                                                    ${escapeHtml(match.location)}  ${match.date_reported}
                                                </p>
                                            </div>
                                            <span class="px-2 py-1 text-xs rounded-full ${getTypeColor(match.type)} font-medium">${match.type}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            // Trigger animation
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeModal() {
            const modal = document.getElementById('item-modal');
            modal.classList.remove('active');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }, 300);
        }

        function closeModalOnBackdrop(event) {
            if (event.target.id === 'item-modal') {
                closeModal();
            }
        }

        // Find potential matches between lost and found items
        function findPotentialMatches(item) {
            if (!item) return [];
            
            return currentData.filter(otherItem => {
                if (otherItem.id === item.id) return false;
                if (otherItem.type === item.type) return false; // Only match lost with found
                
                const titleMatch = otherItem.title.toLowerCase().includes(item.title.toLowerCase().split(' ')[0]) ||
                                  item.title.toLowerCase().includes(otherItem.title.toLowerCase().split(' ')[0]);
                const categoryMatch = otherItem.category === item.category;
                const locationMatch = otherItem.location === item.location;
                
                // Calculate match score
                let score = 0;
                if (titleMatch) score += 3;
                if (categoryMatch) score += 2;
                if (locationMatch) score += 1;
                
                return score >= 3; // Require at least title + category match
            }).slice(0, 3); // Return top 3 matches
        }

        // Utility to escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            initializeFormListeners();
            initializeImagePreview();
        });
    </script>
</body>
</html>